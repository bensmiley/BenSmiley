// Generated by CoffeeScript 1.7.1
define(['jquery', 'jquery-validate'], function() {
  return $(document).ready(function() {
    var formatforgotPasswordData;
    jQuery.validator.setDefaults({
      debug: true,
      success: "valid"
    });
    $('#forgot-password-form').validate({
      focusInvalid: false,
      ignore: "",
      rules: {
        user_email: {
          required: true,
          email: true
        }
      },
      errorPlacement: function(label, element) {
        var parent;
        $('<span class="error"></span>').insertAfter(element).append(label);
        parent = $(element).parent('.input-with-icon');
        return parent.removeClass('success-control').addClass('error-control');
      },
      success: function(label, element) {
        var parent;
        parent = $(element).parent('.input-with-icon');
        return parent.removeClass('error-control').addClass('success-control');
      }
    });
    $('#btn-forgot-pass').click(function() {
      if ($('#signup-form').valid()) {
        return $('#signup-form').submit(function() {
          var forgotPasswordDetails, forgotPasswordDetailsArray, formAction;
          forgotPasswordDetailsArray = $(this).serializeArray();
          forgotPasswordDetails = formatforgotPasswordData(forgotPasswordDetailsArray);
          formAction = {
            'action': 'new-user-signup'
          };
          $.extend(forgotPasswordDetails, formAction);
          return $.post(AJAXURL, forgotPasswordDetails, function(response) {
            var errorMsg, successMsg;
            if (response.code === "OK") {
              successMsg = response.msg;
              $('#display-msg').empty();
              $('#display-msg').append(successMsg);
              $('#btn-signup-form-reset').click();
            }
            if (response.code === "ERROR") {
              errorMsg = response.msg;
              $('#display-msg').empty();
              return $('#display-msg').append(errorMsg);
            }
          });
        });
      } else {
        $('#display-msg').empty();
        return $('#display-msg').append("<p>not valid form</p>");
      }
    });
    return formatforgotPasswordData = function(serializedDataArray) {
      var data;
      data = {};
      $.each(serializedDataArray, function(key, ele) {
        return data[ele.name] = ele.value;
      });
      return data;
    };
  });
});

//# sourceMappingURL=forgot-password.map
